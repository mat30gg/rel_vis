"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9915],{4857:(M,f,l)=>{l.d(f,{c:()=>s});var i=l(4438),v=l(6879);let s=(()=>{var u;class d{constructor(n){this.matSnackBar=n}mensajeError(n){this.showSnackBar(n,"","snackbar-warning")}showSnackBar(n,h="",C="snackbar-success"){this.matSnackBar.open(n,h,{duration:2e3,panelClass:C})}}return(u=d).\u0275fac=function(n){return new(n||u)(i.KVO(v.UG))},u.\u0275prov=i.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),d})()},9915:(M,f,l)=>{l.r(f),l.d(f,{LoginModule:()=>y});var i=l(3819),v=l(177),s=l(4341),u=l(2146),d=l(467),g=l(8392),n=l(4438);let h=(()=>{var e;class c{constructor(o){this.modalCtrl=o,this.name=""}ngOnInit(){}cancel(){this.modalCtrl.dismiss(null,"cancel")}send(){this.modalCtrl.dismiss({name:this.name},"accept")}}return(e=c).\u0275fac=function(o){return new(o||e)(n.rXU(i.W3))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-modal-name-input"]],decls:10,vars:3,consts:[["placeholder","Ingrese su nombre",3,"ngModelChange","autofocus","maxlength","ngModel"],[1,"action-buttons"],["color","danger","fill","clear",3,"click"],["color","success",3,"click"]],template:function(o,t){1&o&&(n.j41(0,"div")(1,"h1")(2,"b"),n.EFF(3,"Invitado"),n.k0s()(),n.j41(4,"ion-input",0),n.mxI("ngModelChange",function(r){return n.DH7(t.name,r)||(t.name=r),r}),n.k0s()(),n.j41(5,"div",1)(6,"ion-button",2),n.bIt("click",function(){return t.cancel()}),n.EFF(7," Cancelar "),n.k0s(),n.j41(8,"ion-button",3),n.bIt("click",function(){return t.send()}),n.EFF(9," Enviar "),n.k0s()()),2&o&&(n.R7$(4),n.Y8G("autofocus",!0)("maxlength",20),n.R50("ngModel",t.name))},dependencies:[i.Jm,i.$w,i.Gw,s.BC,s.tU,s.vS],styles:[".action-buttons[_ngcontent-%COMP%]{float:right}"]}),c})();var C=l(4857);function _(e,c){1&e&&(n.j41(0,"div",13),n.nrm(1,"ion-spinner",14),n.k0s())}const k=[{path:"",component:(()=>{var e;class c{constructor(o,t,a,r){this.auth=o,this.router=t,this._servicioCompartido=a,this.modalCtrl=r,this.cargandoLogin=!1,this.usersArray=[],this.alertButtons=[];let p=new s.ok;this.formlogin=p.group({email:["",[s.k0.required,s.k0.email]],pass:["",s.k0.required]}),this.logged=!1}openAnonymousModal(){var o=this;return(0,d.A)(function*(){const t=yield o.modalCtrl.create({component:h,cssClass:"small-dialog"});t.present();const{data:a,role:r}=yield t.onWillDismiss();"accept"==r&&o.loginAnonymous(a.name)})()}loginAnonymous(o){var t=this;return(0,d.A)(function*(){t.accessApp(g.zK).then(a=>{a&&(0,g.r7)(a.user,{displayName:o}).catch(r=>{t._servicioCompartido.mensajeError("Error: no se pudo cambiar el nombre. "+r),console.error("Error: no se pudo cambiar el nombre. "+r)})})})()}login(){var o=this;return(0,d.A)(function*(){var t,a;let r=null===(t=o.formlogin.get("email"))||void 0===t?void 0:t.value,p=null===(a=o.formlogin.get("pass"))||void 0===a?void 0:a.value;o.accessApp(g.x9,r,p)})()}accessApp(o,t,a){var r=this;return(0,d.A)(function*(){let p=null;try{r.cargandoLogin=!0,p=yield o(r.auth,t,a),r._servicioCompartido.showSnackBar("Iniciando sesion..."),setTimeout(()=>{r.router.navigate(["main/principal"]),r.formlogin.reset({email:"",pass:""})},2e3)}catch(I){r._servicioCompartido.showSnackBar("Credenciales incorrectas","","snackbar-danger"),console.error("No se pudo iniciar sesion - "+I.message)}finally{return r.cargandoLogin=!1,p}})()}cargarDatosPrueba(o,t){this.formlogin.setValue({email:o,pass:t})}}return(e=c).\u0275fac=function(o){return new(o||e)(n.rXU(g.Nj),n.rXU(u.Ix),n.rXU(C.c),n.rXU(i.W3))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-login"]],decls:23,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],[1,"contenido-login"],["class","spinner",4,"ngIf"],[1,"form-box"],[1,"form",3,"formGroup"],[1,"titulo"],["label","Correo","fill","solid","type","email","formControlName","email","helperText","Ingrese un correo valido","errorText","Correo invalido"],["label","Clave","fill","solid","type","password","formControlName","pass"],["slot","end","color","dark"],["color","secondary",1,"boton-login",3,"click","disabled"],["color","secondary",1,"boton-login",3,"click"],["routerLink","/register"],[1,"spinner"],["color","primary"]],template:function(o,t){1&o&&(n.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),n.EFF(3,"Inicio de sesion"),n.k0s()()(),n.j41(4,"ion-content",1)(5,"div",2),n.DNE(6,_,2,0,"div",3),n.j41(7,"div",4)(8,"form",5)(9,"ion-text")(10,"h1",6),n.EFF(11,"Iniciar sesion"),n.k0s()(),n.nrm(12,"ion-input",7),n.j41(13,"ion-input",8),n.nrm(14,"ion-input-password-toggle",9),n.k0s(),n.j41(15,"ion-button",10),n.bIt("click",function(){return t.login()}),n.EFF(16," Iniciar sesion "),n.k0s(),n.j41(17,"ion-button",11),n.bIt("click",function(){return t.openAnonymousModal()}),n.EFF(18," Ingresar como invitado "),n.k0s()(),n.j41(19,"ion-text"),n.EFF(20," No tienes cuenta? "),n.k0s(),n.j41(21,"a",12),n.EFF(22,"registrate"),n.k0s()()()()),2&o&&(n.Y8G("translucent",!0),n.R7$(4),n.Y8G("fullscreen",!0),n.R7$(2),n.Y8G("ngIf",t.cargandoLogin),n.R7$(2),n.Y8G("formGroup",t.formlogin),n.R7$(7),n.Y8G("disabled",t.formlogin.invalid))},dependencies:[i.Jm,i.W9,i.eU,i.$w,i.Wv,i.w2,i.IO,i.BC,i.ai,i.Gw,i.oY,v.bT,s.qT,s.BC,s.cb,s.j4,s.JD,u.Wk],styles:[".form-box[_ngcontent-%COMP%]{justify-items:center;padding:5%}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;text-align:center}.form[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{text-align:initial}.titulo[_ngcontent-%COMP%]{font-weight:700;font-size:1.6rem}.contenido-login[_ngcontent-%COMP%]{position:relative;margin:auto;width:26rem;max-width:86%;top:50%;transform:translateY(-50%)}ion-fab[_ngcontent-%COMP%]{margin-bottom:var(--ion-safe-area-bottom, 0)}ion-fab[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark)}"]}),c})()}];let b=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[u.iI.forChild(k),u.iI]}),c})(),y=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[i.bv,v.MD,s.YN,s.X1,b]}),c})()}}]);